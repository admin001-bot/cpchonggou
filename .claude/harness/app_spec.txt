# 项目规范说明

## 项目概述
这是一个PHP彩票/游戏网站项目，提供在线投注、开奖查询、用户管理等功能。

## 技术架构

### 后端
- **语言**: PHP
- **数据库**: MySQL
- **框架**: 自定义轻量级MVC框架
- **缓存**: 文件缓存 (_cache_$98sER9@fw!d#s4fef/)

### 前端
- **JS库**: jQuery 1.7.2/1.8.0
- **UI组件**: jQuery UI
- **样式**: 自定义CSS

## 目录结构

```
/
├── config.php           # 数据库配置
├── index.php            # 入口文件 (路由)
├── sqlin.php            # SQL注入防护
├── safe.sys.php         # 系统安全
├── wjaction/default/    # 控制器目录
│   ├── WebBase.class.php      # 基础控制器
│   ├── WebLoginBase.class.php # 登录基类
│   ├── User.class.php         # 用户控制器
│   ├── Game.class.php         # 游戏控制器
│   ├── Api.class.php          # API控制器
│   └── ...
├── wjinc/default/       # 模板目录
│   ├── index/           # 首页模板
│   ├── user/            # 用户相关模板
│   ├── game/            # 游戏相关模板
│   └── ...
├── views/               # 视图目录
├── lib/                 # 类库目录
│   ├── core/            # 核心类
│   └── classes/         # 第三方类
├── skin/                # 静态资源
│   ├── js/              # JavaScript
│   ├── admin/           # 后台样式
│   └── main/            # 前台样式
└── upload/              # 上传文件
```

## URL路由规则
- `/index.php/{controller}/{action}` - 标准路由
- `/index.php/Game/{action}` - 游戏相关
- 支持 PATH_INFO 和查询字符串两种方式

## 数据库表前缀
- `ssc_` - 默认表前缀

## 主要功能模块
1. **用户系统**: 注册、登录、个人信息、安全设置
2. **游戏系统**: 投注、开奖、历史记录
3. **资金系统**: 充值、提现、账变记录
4. **团队系统**: 代理、佣金、下级管理
5. **后台管理**: 用户管理、游戏设置、财务管理

## 开发规范
1. 控制器方法必须声明为 `final`
2. 使用参数化查询防止SQL注入
3. 所有输出需要经过 htmlspecialchars
4. 遵循 PSR-1/PSR-12 编码规范

## 安全注意事项
1. 数据库凭证不应硬编码
2. 所有用户输入必须验证
3. 敏感操作需要二次验证
4. 实现请求频率限制
