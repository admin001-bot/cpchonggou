<ion-view class="m-register" view-title="註冊">
	<ion-nav-bar class="bar-light">
		<ion-nav-buttons side="left">
	    	<a class="button button-icon icon-prepage" ng-click="back();"></a>
	  	</ion-nav-buttons>
	</ion-nav-bar>
	
	<ion-content class="padding" delegate-handle="regScroll">
		<form role="form" name="regForm" class="form-horizontal" novalidate>
		
		<div class="list list-inset list-theme">
			<p>為了您的資金安全，請使用真實資料!</p>
			
			<div ng-if="step==1">
				<div class="item item-input nopadding border-theme input-images input-name">
					<input class="reset-field" type="text" name="username" ng-model="regData.username" placeholder="帳號" ng-keyup="resetCheck();" ng-blur="checkUserName(regData.username)" ng-pattern="/^[A-Za-z0-9]+$/" ng-minlength="6" ng-maxlength="15" required />
				</div>
				<p class="item-warn text-light" ng-if="!regForm.username.$touched">*請使用6-15位英文或數字的組合</p>
				<p class="item-warn text-assertive" ng-if="regForm.username.$touched && regForm.username.$invalid" >*請使用6-15位英文或數字的組合</p>
				<p class="item-warn text-light" ng-if="!usernameExist&&regForm.username.$touched && regForm.username.$valid" style="color:green;">*該帳號可用</p>
				<p class="item-warn text-assertive" ng-if="usernameExist">*該帳號已註冊，不可用</p>

				<div class="item item-input nopadding border-theme input-images input-name">
					<input class="reset-field" type="text" name="fullName" ng-model="regData.fullName" placeholder="真實姓名" ng-keyup="checkFullName(regData.fullName);" ng-blur="checkFullName(regData.fullName);" required />
				</div>
				<p class="item-warn text-light" ng-class="(regForm.fullName.$touched && !fullNameIsOk) ? 'text-assertive' : 'text-light'">*請輸入真實姓名[2~5個漢字]</p>
				
				<div class="item item-input nopadding border-theme input-images input-pwd">
					<input class="password-eye" type="password" name="password" ng-model="regData.password" placeholder="密碼" ng-minlength="6" ng-maxlength="20" required />
				</div>
				<p class="item-warn text-light" ng-class="(regForm.password.$touched && regForm.password.$invalid) ? 'text-assertive' : 'text-light'">*請使用6-20位元字符</p>

				<div class="item item-input nopadding border-theme input-images input-pwd">
					<input class="password-eye" type="password" name="passwordRpt" ng-model="regData.passwordRpt" placeholder="確認密碼" ng-minlength="6" ng-maxlength="20" required />
				</div>
				<p class="item-warn text-assertive" ng-show="(regForm.passwordRpt.$touched&&regData.passwordRpt!=regData.password)">*密碼不一致</p>

				<button type="button" ng-disabled="usernameExist || regForm.password.$invalid || regData.passwordRpt!=regData.password || !fullNameIsOk" class="button button-block button-positive" ng-click="setStep(2);">下一步</button>
			</div>
			
			<div ng-if="step==2">
				<div class="item item-input nopadding border-theme select-item">
					<span class="text-label">提款密碼</span>
					<div class="row sel-wrap">
						<select id="paypasswd" class="col col-25" ng-model="regData.fundPwd1" style="border-right: solid 1px #fff; "> <option value="0">0</option> <option value="1">1</option> <option value="2">2</option> <option value="3">3</option> <option value="4">4</option> <option value="5">5</option> <option value="6">6</option> <option value="7">7</option> <option value="8">8</option> <option value="9">9</option> </select> 
						<select id="paypasswd" class="col col-25" ng-model="regData.fundPwd2" style="border-right: solid 1px #fff; "> <option value="0">0</option> <option value="1">1</option> <option value="2">2</option> <option value="3">3</option> <option value="4">4</option> <option value="5">5</option> <option value="6">6</option> <option value="7">7</option> <option value="8">8</option> <option value="9">9</option> </select> 
						<select id="paypasswd" class="col col-25" ng-model="regData.fundPwd3" style="border-right: solid 1px #fff; "> <option value="0">0</option> <option value="1">1</option> <option value="2">2</option> <option value="3">3</option> <option value="4">4</option> <option value="5">5</option> <option value="6">6</option> <option value="7">7</option> <option value="8">8</option> <option value="9">9</option> </select> 
						<select id="paypasswd" class="col col-25" ng-model="regData.fundPwd4"> <option value="0">0</option> <option value="1">1</option> <option value="2">2</option> <option value="3">3</option> <option value="4">4</option> <option value="5">5</option> <option value="6">6</option> <option value="7">7</option> <option value="8">8</option> <option value="9">9</option> </select>
					</div> 
				</div>

				<div class="item item-input nopadding border-theme input-images input-email">
					<input class="reset-field" type="email" name="email" required placeholder="邮箱" ng-model="regData.email" ng-blur="checkEmail(regData.email)" ng-keydown="emailKeydown()" ng-maxlength="25" ng-pattern="/^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/" />
				</div>
				<p class="item-warn text-light" ng-class="(regForm.email.$touched && regForm.email.$invalid) ? 'text-assertive' : 'text-light'">*請輸入合法的郵箱格式</p>
				
				<div class="item item-input nopadding border-theme input-images input-pwd">
					<input class="validcode-field" ng-model="regData.vcode" placeholder="驗證碼" name="vcode" type="text" required />
				</div>
				
				<button type="submit" ng-disabled="usernameExist || regForm.$invalid" class="button button-block button-positive" ng-click="reg();">註冊</button>
			</div>
			
			<div class="row">
				<div class="col text-center"><p>已有帳號?<a href="#/login">馬上登入</a></p></div>
			</div>
		</div>  
		
		</form>
	</ion-content>
</ion-view>